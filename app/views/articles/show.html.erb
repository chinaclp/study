
<p>
<b>标题：</b>
<%= @article.title %>
</p> 

<p>
<b>摘要：</b>
<%= @article.summary %>
</p>

<p>
<b>内容：</b>
<%= @article.content.html_safe %>
</p> 

<p>
<b>评论：</b>
<% @article.comments.each do |comment| %>
  <div> 
    <%= render partial: "info", locals: {comment: comment} %>
  </div> 
<%end%>
</p> 


<p> 
<script type="text/javascript">
  $(document).ready(function(){
      $(".del_button").on('ajax:success',function(ex,e){
        alert(e['id']);
        $("#comment_"+e['id']).remove();
        });
      })
</script>
</p> 

<p>
<b>添加评论</b>
<%= form_for [@article, @comment], :remote => true, :html => {:'data-type' => 'json'} do |f| %> 
  <div class="field">  
    <%= f.label "内容" %><br />  
    <%= f.text_area :content %>  
  </div>
  <%= submit_tag "提交" %>
<% end %>
</p> 

<p>
<b>评论三</b>
<script type="text/javascript">
  $(document).ready(function(){
      $('#new_comment').on('ajax:success',function(ex,e){
        alert(1);
        console.debug(ex);
        console.debug(e);
        console.debug(e['content']);
        $("ul").append("<li>"+ "用户："+ e['user_name'] +".  评论：" +  e['content'] +".  "+ e['time_now'] + "</li>");
        });
      });
</script>
</p> 

<ul> 
  <input type="hidden" value="46" name="comment_id"> 
  <td>  
    <input id="bt_destroy_cib" type="button" value="删除">  
  </td>  
</ul> 


<%= link_to '修改',edit_article_path(@article)  %>
<%= link_to '返回文章主页面',articles_path%>
<%= link_to '返回主页面',root_path%>    

